<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Cart | Medicare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Tailwind + DaisyUI -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="bg-base-100 min-h-screen">
  <!-- üß≠ Navbar -->
  <nav class="navbar bg-base-200 shadow-sm rounded-b-xl px-4 py-2 flex flex-wrap items-center justify-between">
    <div class="flex items-center gap-2">
      <a href="/client/index.html" class="btn btn-ghost text-xl font-bold text-primary">Medicare</a>
      <a href="shop.html" class="btn btn-outline btn-sm ml-2">‚Üê Back to Shop</a>
    </div>

    <div class="flex items-center gap-4">
      <button 
        class="btn btn-ghost text-xl"
        onclick="window.location.href='/client/patient/pages/cart.html'"
        title="View Cart"
      >
        üõí
      </button>
      <div class="dropdown dropdown-end">
        <label tabindex="0" class="avatar cursor-pointer">
          <div class="w-10 rounded-full border-2 border-primary">
            <img id="userAvatar" src="/client/assets/images/user-avatar.jpg" alt="User Avatar" />
          </div>
        </label>
        <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40">
          <li><a href="../pages/profile.html">Profile</a></li>
          <li><a href="/client/index.html">Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- üõçÔ∏è Main Cart Section -->
  <main class="container mx-auto px-2 py-6">
    <section id="cartEmpty" class="hidden flex flex-col items-center justify-center py-16">
      <h2 class="text-3xl mb-2">Your cart is empty.</h2>
      <a href="shop.html" class="btn btn-primary mt-4 transition-all duration-200">Shop Now</a>
    </section>

    <section id="cartContent" class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Cart Items -->
      <div class="md:col-span-2 flex flex-col gap-6" id="cartItems"></div>

      <!-- Cart Summary -->
      <aside class="md:col-span-1">
        <div class="card bg-base-100 shadow-lg p-6">
          <h2 class="card-title mb-4 text-primary">Cart Summary</h2>
          <div class="divider"></div>
          <div class="flex justify-between mb-2 text-base">
            <span>Subtotal</span>
            <span id="subtotal">Ksh 0</span>
          </div>
          <div class="flex justify-between mb-2 text-base">
            <span>Delivery Fee</span>
            <span id="deliveryFee">Ksh 150</span>
          </div>
          <div class="flex justify-between font-bold text-lg mt-4">
            <span>Total</span>
            <span id="total">Ksh 0</span>
          </div>
          <a 
            href="checkout.html" 
            id="checkoutBtn" 
            class="btn btn-primary w-full mt-6 transition-all duration-200"
          >
            Proceed to Checkout
          </a>
        </div>
      </aside>
    </section>
  </main>

  <!-- üß† Scripts -->
  <script src="../scripts/cart.js">
  //   // --- Handle user avatar ---
  //   (() => {
  //     try {
  //       const userData = JSON.parse(localStorage.getItem('user') || '{}');
  //       if (userData?.profilePic) {
  //         document.getElementById('userAvatar').src = userData.profilePic;
  //       }
  //     } catch (e) {
  //       console.error("Error loading user data:", e);
  //     }
  //   })();
  // </script>

  // <script>
  //   // --- Cart Logic ---
  //   const deliveryFee = 150;
  //   let cart = [
  //     { name: "Ibuprofen", price: 180, image: "/client/assets/images/ibuprofen.jpg", qty: 1 }
  //   ];

  //   function renderCart() {
  //     const cartItemsDiv = document.getElementById('cartItems');
  //     const cartContentDiv = document.getElementById('cartContent');
  //     const cartEmptyDiv = document.getElementById('cartEmpty');

  //     // Clear current cart UI
  //     cartItemsDiv.innerHTML = '';

  //     // Toggle empty cart view
  //     if (cart.length === 0) {
  //       cartContentDiv.classList.add('hidden');
  //       cartEmptyDiv.classList.remove('hidden');
  //       updateSummary();
  //       return;
  //     }

  //     cartContentDiv.classList.remove('hidden');
  //     cartEmptyDiv.classList.add('hidden');

  //     // Render each item
  //     cart.forEach((item, idx) => {
  //       const card = document.createElement('div');
  //       card.className = "card card-bordered flex flex-row items-center gap-4 p-4 shadow transition-all duration-200";
  //       card.innerHTML = `
  //         <div class="w-20 h-20 rounded-xl overflow-hidden border-2 border-primary flex-shrink-0">
  //           <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover" />
  //         </div>
  //         <div class="flex-1 flex flex-col gap-1">
  //           <span class="font-bold text-lg text-primary">${item.name}</span>
  //           <span class="text-base text-gray-500">Ksh ${item.price.toLocaleString()}</span>
  //         </div>
  //         <div class="flex items-center gap-2">
  //           <button class="btn btn-sm btn-outline" data-action="dec" data-idx="${idx}">-</button>
  //           <input type="number" min="1" value="${item.qty}" class="input input-bordered w-20 text-center" data-idx="${idx}" />
  //           <button class="btn btn-sm btn-outline" data-action="inc" data-idx="${idx}">+</button>
  //         </div>
  //         <div class="ml-4">
  //           <button class="btn btn-error btn-sm" data-remove="${idx}">Remove</button>
  //         </div>
  //       `;
  //       cartItemsDiv.appendChild(card);
  //     });

  //     attachCartEvents();
  //     updateSummary();
  //   }

  //   function attachCartEvents() {
  //     // Quantity increment/decrement
  //     document.querySelectorAll('button[data-action]').forEach(btn => {
  //       btn.onclick = () => {
  //         const idx = +btn.dataset.idx;
  //         if (btn.dataset.action === 'dec' && cart[idx].qty > 1) cart[idx].qty--;
  //         else if (btn.dataset.action === 'inc') cart[idx].qty++;
  //         renderCart();
  //       };
  //     });

  //     // Manual quantity input
  //     document.querySelectorAll('input[data-idx]').forEach(input => {
  //       input.onchange = () => {
  //         const idx = +input.dataset.idx;
  //         const val = Math.max(1, +input.value || 1);
  //         cart[idx].qty = val;
  //         renderCart();
  //       };
  //     });

  //     // Remove item
  //     document.querySelectorAll('button[data-remove]').forEach(btn => {
  //       btn.onclick = () => {
  //         const idx = +btn.dataset.remove;
  //         cart.splice(idx, 1);
  //         renderCart();
  //       };
  //     });
  //   }

  //   function updateSummary() {
  //     const subtotal = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
  //     document.getElementById('subtotal').textContent = `Ksh ${subtotal.toLocaleString()}`;
  //     document.getElementById('deliveryFee').textContent = `Ksh ${cart.length ? deliveryFee : 0}`;
  //     document.getElementById('total').textContent = `Ksh ${(subtotal + (cart.length ? deliveryFee : 0)).toLocaleString()}`;
  //     document.getElementById('checkoutBtn').classList.toggle('btn-disabled', cart.length === 0);
  //   }

  //   // Initial render
  //   renderCart();
  </script>
</body>
</html>
